#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# ============================================
# CONFIGURAÇÃO PARA EASY PANEL / VPS
# ============================================
# Arquivo unificado com configurações originais do Superset
# e otimizações para evitar conflitos de porta
# Salve como: docker/.env
# ============================================

# Allowing python to print() in docker
PYTHONUNBUFFERED=1
COMPOSE_PROJECT_NAME=superset
DEV_MODE=true

# ============================================
# CONFIGURAÇÃO DE PORTAS
# ============================================
# IMPORTANTE: Para Easy Panel, apenas SUPERSET_EXTERNAL_PORT é exposta externamente
# As outras portas são apenas para comunicação interna entre containers

# Porta externa principal (única porta exposta para o host)
# Mude esta porta se 8088 já estiver em uso no seu VPS
SUPERSET_EXTERNAL_PORT=8088

# Portas internas (não causam conflito - apenas rede Docker interna)
# Você pode descomentar e modificar se necessário, mas não é obrigatório
# NGINX_PORT=80
SUPERSET_PORT=8088
# NODE_PORT=9000
# WEBSOCKET_PORT=8080
# CYPRESS_PORT=8081
# DATABASE_PORT=5432
# REDIS_PORT=6379

# ============================================
# BANCO DE DADOS PRINCIPAL (PostgreSQL)
# ============================================
DATABASE_DB=superset
DATABASE_HOST=db
DATABASE_PORT=5432
DATABASE_DIALECT=postgresql
DATABASE_USER=superset

# ⚠️ IMPORTANTE: Mude esta senha em produção!
DATABASE_PASSWORD=superset

# Configurações PostgreSQL
POSTGRES_DB=superset
POSTGRES_USER=superset
POSTGRES_PASSWORD=superset

# ============================================
# BANCO DE DADOS DE EXEMPLOS
# ============================================
EXAMPLES_DB=examples
EXAMPLES_HOST=db
EXAMPLES_USER=examples
EXAMPLES_PASSWORD=examples
EXAMPLES_PORT=5432

# ============================================
# REDIS (Cache e Filas)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_CELERY_DB=0
REDIS_RESULTS_DB=1

# ============================================
# SUPERSET - CONFIGURAÇÕES DA APLICAÇÃO
# ============================================
SUPERSET_ENV=development
SUPERSET_APP_ROOT="/"

# Carregar exemplos? (yes/no)
SUPERSET_LOAD_EXAMPLES=yes

# Mudar SECRET_KEY para produção
# Gerar um novo com: python3 -c "import secrets; print(secrets.token_urlsafe(42))"
SUPERSET_SECRET_KEY=TEST_NON_DEV_SECRET

# Mapbox (para mapas - opcional)
MAPBOX_API_KEY=''

# ============================================
# DESENVOLVIMENTO E LOGGING
# ============================================
# Flask debug mode (true para desenvolvimento, false para produção)
FLASK_DEBUG=true

# Nível de log: debug, info, warning, error, critical
# Use 'info' para desenvolvimento normal
# Use 'debug' apenas se precisar investigar problemas específicos
SUPERSET_LOG_LEVEL=info

# ============================================
# PYTHON E BUILD
# ============================================
# Adiciona diretórios personalizados ao PYTHONPATH
PYTHONPATH=/app/pythonpath:/app/docker/pythonpath_dev

# Build do frontend dentro do Docker
BUILD_SUPERSET_FRONTEND_IN_DOCKER=true

# ============================================
# CYPRESS E TESTES (Desenvolvimento)
# ============================================
CYPRESS_CONFIG=false

# ============================================
# BROWSER AUTOMATION (Opcional)
# ============================================
# Desabilitar downloads desnecessários
ENABLE_PLAYWRIGHT=false
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true

# ============================================
# ANALYTICS
# ============================================
SCARF_ANALYTICS=false

# ============================================
# NOTAS IMPORTANTES PARA PRODUÇÃO
# ============================================
# Antes de usar em produção, DEVE:
# 1. Mudar DATABASE_PASSWORD para algo seguro
# 2. Mudar SUPERSET_SECRET_KEY (gerar novo)
# 3. Mudar SUPERSET_ENV=production
# 4. Mudar FLASK_DEBUG=false
# 5. Configurar HTTPS/SSL
# ============================================
